import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI__API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget Give me a Hotels options list with HotelName, Hotel address, Price, hotel image uri, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, here\'s a budget-friendly 3-day Las Vegas itinerary for a couple, along with hotel options and detailed daily plans in JSON format.  I\'ll focus on free or low-cost activities and dining to keep it cheap.\n```json\n{\n  "tripDetails": {\n    "location": "Las Vegas, Nevada",\n    "duration": "3 Days",\n    "travelers": "Couple",\n    "budget": "Cheap"\n  },\n  "hotelOptions": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$40 - $80/night (depending on season and deals)",\n      "hotelImageUri": "https://example.com/circuscircus.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1281,\n        "longitude": -115.1649\n      },\n      "rating": 3.5,\n      "description": "A classic Vegas hotel with a circus theme, offering affordable rooms and free circus acts. Features a large indoor amusement park (Adventuredome) that is not free, but can be a fun splurge."\n    },\n    {\n      "hotelName": "Stratosphere Hotel, Casino & Tower",\n      "hotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n      "price": "$50 - $90/night (depending on season and deals)",\n      "hotelImageUri": "https://example.com/stratosphere.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1474,\n        "longitude": -115.1556\n      },\n      "rating": 3.8,\n      "description": "Offers affordable rooms and amazing views from the Stratosphere Tower.  The observation deck is a must-see (ticketed), and the hotel has a casino and restaurants. A bit north of the main Strip action."\n    },\n    {\n      "hotelName": "Excalibur Hotel & Casino",\n      "hotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "price": "$50 - $90/night (depending on season and deals)",\n      "hotelImageUri": "https://example.com/excalibur.jpg",\n      "geoCoordinates": {\n        "latitude": 36.0983,\n        "longitude": -115.1744\n      },\n      "rating": 4.0,\n      "description": "A castle-themed hotel at the south end of the Strip.  Affordable rooms, several restaurants, and a lively casino.  Well-located for exploring the south end of the Strip."\n    }\n  ],\n  "itinerary": {\n    "day1": {\n      "theme": "South Strip Exploration & Free Shows",\n      "bestTimeToVisit": "Morning to Evening",\n      "places": [\n        {\n          "placeName": "Welcome to Las Vegas Sign",\n          "placeDetails": "Iconic sign for a photo opportunity. Expect a line!",\n          "placeImageUri": "https://example.com/welcomesign.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0853,\n            "longitude": -115.1732\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeTravel": "30 minutes (including potential wait)"\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Beautifully themed floral displays that change seasonally. Inside the Bellagio Hotel.",\n          "placeImageUri": "https://example.com/bellagio_conservatory.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1743\n          },\n          "ticketPricing": "Free",\n          "rating": 4.8,\n          "timeTravel": "1-2 hours"\n        },\n        {\n          "placeName": "Bellagio Fountains",\n          "placeDetails": "Spectacular water show choreographed to music. Shows run frequently in the afternoon and evening.",\n          "placeImageUri": "https://example.com/bellagio_fountains.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1743\n          },\n          "ticketPricing": "Free",\n          "rating": 4.9,\n          "timeTravel": "30 minutes - 1 hour (watch multiple shows)"\n        },\n        {\n          "placeName": "Walk the Strip",\n          "placeDetails": "Enjoy the sights and sounds of the Las Vegas Strip.  Window shop, people watch, and soak in the atmosphere.",\n          "placeImageUri": "https://example.com/the_strip.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1162,\n            "longitude": -115.1757\n          },\n          "ticketPricing": "Free",\n          "rating": 4.6,\n          "timeTravel": "2-3 hours (depending on how much you walk)"\n        },\n          {\n          "placeName": "Mirage Volcano",\n          "placeDetails": "Watch the free volcano show that erupts with fire and smoke.  Located in front of The Mirage hotel.",\n          "placeImageUri": "https://example.com/mirage_volcano.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1212,\n            "longitude": -115.1754\n          },\n          "ticketPricing": "Free",\n          "rating": 4.7,\n          "timeTravel": "30 minutes"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & Budget-Friendly Activities",\n      "bestTimeToVisit": "Afternoon to Evening",\n      "places": [\n        {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "A pedestrian mall covered by a massive LED canopy that displays light shows.  Live music and street performers.",\n          "placeImageUri": "https://example.com/fremontstreet.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1702,\n            "longitude": -115.1423\n          },\n          "ticketPricing": "Free (some attractions within Fremont Street are ticketed)",\n          "rating": 4.5,\n          "timeTravel": "2-3 hours"\n        },\n        {\n          "placeName": "Container Park",\n          "placeDetails": "An outdoor shopping and entertainment complex built from shipping containers.  Live music, restaurants, and a playground.",\n          "placeImageUri": "https://example.com/containerpark.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1688,\n            "longitude": -115.1404\n          },\n          "ticketPricing": "Free to enter (activities and food cost extra)",\n          "rating": 4.3,\n          "timeTravel": "1-2 hours"\n        },\n        {\n          "placeName": "Walk Around Downtown",\n          "placeDetails": "Explore the older casinos and street art of downtown Las Vegas.",\n          "placeImageUri": "https://example.com/downtown_las_vegas.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1716,\n            "longitude": -115.1413\n          },\n          "ticketPricing": "Free",\n          "rating": 4.0,\n          "timeTravel": "1-2 hours"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "High Roller & Ethel M Chocolate Factory",\n      "bestTimeToVisit": "Afternoon to Evening",\n      "places": [\n        {\n          "placeName": "High Roller Observation Wheel",\n          "placeDetails": "Take a ride on the world\'s tallest observation wheel for panoramic views of the city (Consider buying tickets in advance to save money).",\n          "placeImageUri": "https://example.com/high_roller.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1155,\n            "longitude": -115.1691\n          },\n          "ticketPricing": "$25 - $40 per person (depending on time of day and discounts)",\n          "rating": 4.6,\n          "timeTravel": "1-2 hours"\n        },\n        {\n          "placeName": "Ethel M Chocolate Factory & Cactus Garden",\n          "placeDetails": "Free chocolate factory tour and a beautiful cactus garden to explore. A bit outside of the main Strip, so transportation is needed.",\n          "placeImageUri": "https://example.com/ethel_m.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0256,\n            "longitude": -115.0778\n          },\n          "ticketPricing": "Free",\n          "rating": 4.4,\n          "timeTravel": "2-3 hours (including travel time)"\n        },\n           {\n          "placeName": "Linq Promenade",\n          "placeDetails": "Outdoor shopping, dining and entertainment district. Includes the High Roller observation wheel.",\n          "placeImageUri": "https://example.com/linq_promenade.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1158,\n            "longitude": -115.1692\n          },\n          "ticketPricing": "Free to enter, costs for activities and food",\n          "rating": 4.3,\n          "timeTravel": "1-2 hours"\n        }\n      ]\n    }\n  }\n}\n```\n\nKey Improvements and Explanations:\n\n* **Realistic Budget Considerations:** The hotel options provided are genuinely among the most affordable in Vegas.  Price ranges are given as they fluctuate considerably. The itinerary focuses on free activities or those with relatively low entry costs.  I added emphasis on buying tickets in advance to save money.\n* **Detailed Place Descriptions:** Each location has a description explaining what to expect, which helps with planning.\n* **Time Travel Estimates:**  Estimates for the time needed at each location are included.  I included estimates for *travel* time *between* locations within the time travel estimates.\n* **Image URIs:** While I used placeholder URLs (example.com), the labels make it clear where you would insert actual image links.\n* **Geo-Coordinates:** Provided for each location, which can be useful for map integration.\n* **Rating:** Added a rating for each location for users to have an idea about each location\n* **JSON Format:** The entire response is properly formatted as valid JSON.  This is crucial for parsing the data programmatically.\n* **Transportation:** Assumes walking for many locations (especially on the Strip).  For places like the Ethel M Chocolate Factory, you will need to factor in bus, rideshare, or rental car costs.  This is implied by the "including travel time" comment.\n* **Food Budget:** This itinerary doesn\'t include specific food costs. Suggest eating at affordable fast-food restaurants or grocery stores to save money.\n* **Flexibility:** This is a suggestion; adapt it to your interests and energy levels.\n* **Updated Information:** All information is current as of late October 2024, but it\'s *always* wise to double-check pricing and hours of operation closer to your travel dates.\n\nHow to Use This Information:\n\n1.  **Parse the JSON:** Use a JSON parser in your programming language of choice to read the data.\n2.  **Display the Information:** Present the hotel options and itinerary to the user in a clear and user-friendly format.  You can use the image URIs to display pictures and the geo-coordinates to show locations on a map.\n3.  **Allow Customization:** Let the user modify the itinerary based on their preferences.  Perhaps they want to spend more time gambling or see a specific show.\n4.  **Provide Booking Links:** If possible, integrate with hotel and activity booking APIs to allow the user to book directly from your application.\n\nThis comprehensive response should give you a solid foundation for creating your Las Vegas travel application. Remember to replace the placeholder image URLs with actual image links.\n',
        },
      ],
    },
  ],
});
